-- MySQL Script generated by MySQL Workbench
-- 04/20/20 15:21:03
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema Timobank
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `Timobank` DEFAULT CHARACTER SET utf8;
USE `Timobank`;

-- -----------------------------------------------------
-- Table `Timobank`.`accounts`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Timobank`.`accounts` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NOT NULL,
  `accountId` VARCHAR(45) NOT NULL,
  `balance` FLOAT NOT NULL DEFAULT 0,
  `pincode` VARCHAR(4) NOT NULL,
  `failedAttempts` INT NOT NULL DEFAULT 0,
  `isBlocked` TINYINT(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC))
ENGINE = InnoDB;

-- ----------------------------
--  Records of `accounts`
-- ----------------------------
INSERT INTO accounts (name, accountId, balance, pincode) VALUES 
("Daniël van der Drift", 1234, 80, "1234"),
("Zoë Zegers", 8467, 100, "1234"),
("Timo van der Meer", 0472, 120, "1234"),
("Robin Koot", 7236, 140, "1234"),
("Jantje", 2398, 50, "1234");


-- -----------------------------------------------------
-- Table `Timobank`.`logs`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Timobank`.`logs` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `accountId` INT NOT NULL,
  `pinnedAtCountry` VARCHAR(45) NOT NULL DEFAULT 'US',
  `pinnedAtBank` VARCHAR(45) NOT NULL DEFAULT 'Timobank',
  `balanceChange` FLOAT NOT NULL,
  `isPositive` TINYINT(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC),
  INDEX `accountId` (`accountId` ASC),
  CONSTRAINT `accountId`
    FOREIGN KEY (`accountId`)
    REFERENCES `Timobank`.`accounts` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
